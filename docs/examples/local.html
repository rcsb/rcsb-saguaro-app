<html lang="en" class=""><head>
    <meta charset="UTF-8">
    <title>CodePen Demo</title>
    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
</head>
<body>

<script src="../build/dist/app.js" type="text/javascript"></script>

<br/>
<br/>
<br/>
<div id="select" ></div>
<div id="selectBis" ></div>
<div id="pfv" style="position: absolute" ></div>

<script>
    function getJsonFromUrl(url) {
        if(!url) url = location.search;
        var query = url.substr(1);
        var result = {};
        query.split("&").forEach(function(part) {
            var item = part.split("=");
            result[item[0]] = decodeURIComponent(item[1]);
        });
        return result;
    }
    //var args = getJsonFromUrl();

    //const seq1 = "QEEYSAMRDAAAAAQYMRTGEGF-------NTKSFEDIHQYREAAAAAAQIKRVKDSDDVPMVLVGNKCDL";
    //const seq2 = "QEEYSAMRD-----QYMRTGEGFLCVFAINNTKSFEDIHQYRE------QIKRVKDSDDVPMVLVGNKCDL";
    //RcsbFvWebApp.buildPfv("pfv", {queryId:"4Z35.A",reference:"PDB_INSTANCE",alignmentSource:"UNIPROT"});
    //RcsbFvWebApp.buildPfv("pfv", {queryId:"NP_002515",reference:"NCBI_PROTEIN",alignmentSource:"PDB_INSTANCE", bottomAlignments:true});
    //RcsbFvWebApp.buildPairwiseAlignment("pfv", seq1, seq2);

    //const module = RcsbFvWebApp.buildEntryChromosome("pfv","select","selectBis","2uzi");
    //console.log(module);
    /*RcsbFvWebApp.buildAssemblySequenceFv(
        "pfv",
        "select",
        "selectBis",
        "1xxx"
    );*/
    //RcsbFvWebApp.buildInstanceFv("pfv", "4Z35.A")
    //RcsbFvWebApp.buildUniprotFv("pfv","P01112")
    /*RcsbFvWebApp.setBoardConfig({
        elementClickCallBack:(e)=>{
            console.log(e);
        },
        highlightHoverElement: true,
        hideRowGlow: true,
        includeTooltip: true,
        disableMenu: false
    });*/
    /*RcsbFvWebApp.buildMultipleInstanceSequenceFv(
        "pfv",
        "select",
        "selectBis",
        ["2uzi","101m"]
    ).then(()=>{
        console.log(RcsbFvWebApp.getRcsbFv("pfv").getBoardConfig());
    })*/
    //const args = getJsonFromUrl();
    /*const module = RcsbFvWebApp.buildInstanceSequenceFv("pfv","select",args.pdb,{});
    const module = RcsbFvWebApp.buildInstanceSequenceFv("pfv","select",args.pdb,{});
    module.then(result=>{
        console.log(result);
    });*/

    /*const module = RcsbFvWebApp.buildMultipleAlignmentSequenceFv("pfv","select","P01112");
    module.then(module=>{
        console.log(module);
        module.wait().then(()=>console.log("READY!!!"));
    /*const module = RcsbFvWebApp.buildUniprotEntityGroupFv("pfv","P01112",{
        filters: [{
            field: "type",
            values: ["BINDING_SITE"],
            operation: "equals",
            source: "PDB_INSTANCE"
        }],
        sources: ["PDB_INSTANCE"]
    }, "feature-targets");*/
    //const module = RcsbFvWebApp.buildGroupFv("pfv", "provenance_sequence_identity", "1_30");
    /*var headers = {
        "Rcsb-Analytics-Traffic-Origin": "internal",
        "Rcsb-Analytics-Traffic-Stage": "saguaro"
    };

    RcsbFvWebApp.RcsbRequestContextManager.initializeBorregoClient({
        requestConfig: {
            headers
        }
    });

    RcsbFvWebApp.RcsbRequestContextManager.initializeYosemiteClient({
        requestConfig: {
            headers
        }
    });

    RcsbFvWebApp.RcsbRequestContextManager.initializeArchesClient({
        requestConfig: {
            headers
        }
    });*/
    //const module = RcsbFvWebApp.buildGroupFv("pfv", "provenance_matching_uniprot_accession", "P01112");
    /*module.then(result=>{
        console.log(result);
    });*/
    RcsbFvWebApp.buildGroupFv("pfv", "provenance_sequence_identity", "1_30");
    //RcsbFvWebApp.buildGroupFv("pfv", "provenance_matching_uniprot_accession", "P38398");


    //const module = RcsbFvWebApp.buildMultipleAlignmentSequenceFv("pfv","select","P01112", {onChangeCallback:(r,s)=>{console.log(r,s)}});
    //module.then(m=>console.log(m));
    /*const args = getJsonFromUrl();

    const anchor = window.location.hash.substr(1);
    const defaultValue =  anchor.length > 0 ? anchor : undefined;
    const dropdownTitle = "CHAIN"

        RcsbFvWebApp.buildInstanceSequenceFv(
            "pfv",
            "select",
            "2UZI",
            {module:"interface"}
        );

    //RcsbFvWebApp.buildEntityFv("pfv","101M_1")
    //const module = RcsbFvWebApp.buildInstanceSequenceFv("pfv","select",args.pdb,{module:"interface"},{
        /*externalTrackBuilder:{
            processAlignmentAndFeatures(data) {

            },
            filterFeatures(annotations) {
                return new Promise(resolve=>{
                    const data = [...annotations];
                    data.forEach(ann=>{
                        ann.features = ann.features.filter(f=>(
                            f.type === "DISORDER" || f.type === "HYDROPATHY"
                        ));
                    })
                    resolve(data);
                });
            },
            addTo(tracks) {
                return new Promise(resolve => {
                    if(tracks.rcsbContext.asymId === "A") {
                        const myTrack = {
                            trackId: "blockTrack",
                            trackHeight: 20,
                            trackColor: "#F9F9F9",
                            titleFlagColor: "#53AD77",
                            displayType: "block",
                            displayColor: "#FF0000",
                            rowTitle: "MY TRACK",
                            trackData: [{
                                begin: 30,
                                end: 60
                            }]
                        }
                        tracks.annotationTracks?.push(myTrack);
                    }else if(tracks.rcsbContext.asymId === "B") {
                        const myTrack = {
                            trackId: "blockTrack",
                            trackHeight: 20,
                            trackColor: "#F9F9F9",
                            titleFlagColor: "#5377AD",
                            displayType: "block",
                            displayColor: "#00FF00",
                            rowTitle: "MY TRACK",
                            trackData: [{
                                begin: 50,
                                end: 80
                            }]
                        }
                        tracks.annotationTracks?.push(myTrack);
                    }
                    resolve();
                })
            }
        }*/
    //});
    /*const module = RcsbFvWebApp.buildMultipleAlignmentSequenceFv("pfv","select","P69905");
    module.then(result=>{
        console.log(result);
    });*/
</script>



</body></html>